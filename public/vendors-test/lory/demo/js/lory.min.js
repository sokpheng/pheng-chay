!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.lory=b()}):"object"==typeof exports?module.exports=b():a.lory=b()}(this,function(){"use strict";function a(a,b,c){var d=new i(b,{detail:c,bubbles:!0,cancelable:!0});a.dispatchEvent(d)}var b,c,d;!function(){var a,e=document.createElement("_").style;""===e[a="webkitTransition"]&&(d="webkitTransitionEnd",c=a),""===e[a="transition"]&&(d="transitionend",c=a),""===e[a="webkitTransform"]&&(b=a),""===e[a="msTransform"]&&(b=a),""===e[a="transform"]&&(b=a)}();var e=[].slice,f=function(a,b){if("undefined"==typeof b&&(b=a,a=0),a>b){var c=a;a=b,b=c}return function(c){return Math.min(Math.max(c,a),b)}},g=function(a,b){var c={};return Object.keys(b).map(function(d){a&&a.hasOwnProperty(d)?c[d]=a[d]:c[d]=b[d]}),c};try{new i("test")}catch(h){var i=function(a,b){var c;return b=b||{bubbles:!1,cancelable:!1,detail:void 0},c=document.createEvent("CustomEvent"),c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c};i.prototype=window.Event.prototype,window.CustomEvent=i}var j=function(h,i){var j,k,l,m,n,o=0,p={};"undefined"!=typeof jQuery&&h instanceof jQuery&&(h=h[0]);var q,r,s,t=h.querySelector(".js_frame"),u=t.querySelector(".js_slides"),v=h.querySelector(".js_prev"),w=h.querySelector(".js_next"),x={slidesToScroll:1,slideSpeed:300,rewindSpeed:600,snapBackSpeed:200,ease:"ease",rewind:!1,infinite:!1},y=function(a){var b=a.slice(0,p.infinite),c=a.slice(a.length-p.infinite,a.length);return b.forEach(function(a){var b=a.cloneNode(!0);u.appendChild(b)}),c.reverse().forEach(function(a){var b=a.cloneNode(!0);u.insertBefore(b,u.firstChild)}),u.addEventListener(d,F),e.call(u.children)},z=function(){a(h,"before.lory.init"),p=g(i,x),j={x:u.offsetLeft,y:u.offsetTop},m=p.infinite?y(e.call(u.children)):e.call(u.children),A(),v&&w&&(v.addEventListener("click",B),w.addEventListener("click",C)),u.addEventListener("touchstart",G),window.addEventListener("resize",J),a(h,"after.lory.init")},A=function(){k=u.getBoundingClientRect().width||u.offsetWidth,l=t.getBoundingClientRect().width||t.offsetWidth,o=0,p.infinite?(D(-1*m[o+p.infinite].offsetLeft,0,null),o+=p.infinite,j.x=-1*m[o].offsetLeft):D(0,p.rewindSpeed,p.ease)},B=function(){E(!1,!1)},C=function(){E(!1,!0)},D=function(a,d,e){var f=u&&u.style;f&&(f[c+"TimingFunction"]=e,f[c+"Duration"]=d+"ms",f[b]="translateX("+a+"px)")},E=function(b,c){a(h,"before.lory.slide",{currentSlide:o,nextSlide:c?o+1:o-1});var d=m.length-1,e=Math.round(k-l),g=f(0,m.length-1),i=p.slideSpeed;e=Math.round(e?e:k*d);var q=f(-1*e,0);"number"!=typeof b&&(b=c?o+p.slidesToScroll:o-p.slidesToScroll),b=g(b),p.infinite&&void 0===c&&(b+=p.infinite);var r=q(-1*m[b].offsetLeft);p.rewind&&Math.abs(j.x)===e&&c&&(r=0,b=0,i=p.rewindSpeed),D(r,i,p.ease),j.x=r,m[b].offsetLeft<=e&&(o=b),p.infinite&&Math.abs(r)===e&&c&&(o=p.infinite,j.x=-1*m[o].offsetLeft,n=function(){D(-1*m[o].offsetLeft,0,null)}),p.infinite&&0===Math.abs(r)&&!c&&(o=m.length-2*p.infinite,j.x=-1*m[o].offsetLeft,n=function(){D(-1*m[o].offsetLeft,0,null)}),a(h,"after.lory.slide",{currentSlide:o})},F=function(){n&&(n(),n=void 0)},G=function(a){var b=a.touches[0];q={x:b.pageX,y:b.pageY,time:Date.now()},s=void 0,r={},u.addEventListener("touchmove",H),u.addEventListener("touchend",I)},H=function(b){var c=b.touches[0];r={x:c.pageX-q.x,y:c.pageY-q.y},"undefined"==typeof s&&(s=!!(s||Math.abs(r.x)<Math.abs(r.y))),s||(a(h,"before.lory.slide"),D(j.x+r.x,0,null))},I=function(){var a=Date.now()-q.time,b=Number(a)<300&&Math.abs(r.x)>25||Math.abs(r.x)>l/3,c=!o&&r.x>0||o===m.length-1&&r.x<0,d=r.x<0;s||(b&&!c?E(!1,d):D(j.x,p.snapBackSpeed)),t.removeEventListener("touchmove"),t.removeEventListener("touchend")},J=function(){a(h,"on.lory.resize"),A()},K=function(){return a(h,"on.lory.destroy"),u.removeEventListener(d,F),u.removeEventListener("touchstart",G),window.removeEventListener("resize",J),v&&v.removeEventListener("click",B),w&&w.removeEventListener("click",C),j=null,k=null,l=null,o=null,p=null,m=null,n=null,h=null,t=null,u=null,v=null,w=null,null};return z(),{slideTo:function(a){E(a)},returnIndex:function(){return o},setup:z,reset:A,prev:B,next:C,destroy:K}};return j});